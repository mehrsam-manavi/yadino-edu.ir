
<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <title>آموزش‌ها | یادینو</title>
    <style>
        body {
            font-family: sans-serif;
            background-color: white;
            color: black;
            margin: 2rem;
        }
        .lesson {
            border: 1px solid #ccc;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>آموزش‌های سایت یادینو</h1>
    <div class="lesson">
        <h2>عنوان آموزش نمونه</h2>
        <p>توضیح مختصر درباره‌ی این آموزش...</p>
    </div>
</body>
</html>
<h2>افزودن آموزش جدید</h2>
<form id="lesson-form">
  <input type="text" id="title" placeholder="عنوان آموزش" required><br><br>
  <textarea id="content" placeholder="محتوای آموزش" required></textarea><br><br>
  <button type="submit">افزودن</button>
</form>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script>
  const SUPABASE_URL = 'https://tqrxizzfxxbtbntohmcz.supabase.co';
  const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'; // کلید کاملتو اینجا بذار

  const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

  const lessonForm = document.getElementById('lesson-form');
  lessonForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    const title = document.getElementById('title').value;
    const content = document.getElementById('content').value;

    const { data, error } = await supabase
      .from('lessons')
      .insert([{ title, content }]);

    if (error) {
      alert('❌ خطا در افزودن آموزش');
      console.error(error);
    } else {
      alert('✅ آموزش با موفقیت اضافه شد');
      lessonForm.reset();
    }
  });
</script>
<h2>آموزش‌های ثبت‌شده</h2>
<div id="lessons-list"></div>
// دریافت آموزش‌ها و نمایش در صفحه
async function loadLessons() {
  const { data, error } = await supabase
    .from('lessons')
    .select('*')
    .order('created_at', { ascending: false });

  const list = document.getElementById('lessons-list');
  list.innerHTML = ''; // پاک‌سازی لیست قبلی

  if (error) {
    list.innerHTML = '❌ خطا در بارگذاری آموزش‌ها';
    console.error(error);
    return;
  }

  data.forEach(lesson => {
    const item = document.createElement('div');
    item.innerHTML = `
      <h3>${lesson.title}</h3>
      <p>${lesson.content}</p>
      <hr>
    `;
    list.appendChild(item);
  });
}

// بارگذاری اولیه آموزش‌ها
loadLessons();
