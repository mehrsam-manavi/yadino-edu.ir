
<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <title>Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª | ÛŒØ§Ø¯ÛŒÙ†Ùˆ</title>
    <style>
        body {
            font-family: sans-serif;
            background-color: black;
            color: white;
            padding: 2rem;
        }
        input, textarea, button {
            display: block;
            margin: 1rem 0;
            padding: 0.5rem;
            width: 100%;
        }
    </style>
</head>
<body>
    <h1>Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª ÛŒØ§Ø¯ÛŒÙ†Ùˆ</h1>
    <form>
        <label>Ø¹Ù†ÙˆØ§Ù† Ø¢Ù…ÙˆØ²Ø´:</label>
        <input type="text" placeholder="Ù…Ø«Ù„Ø§Ù‹ Ø¢Ù…ÙˆØ²Ø´ Ø±ÛŒØ§Ø¶ÛŒ">
        <label>ØªÙˆØ¶ÛŒØ­Ø§Øª:</label>
        <textarea placeholder="ØªÙˆØ¶ÛŒØ­ Ú©Ø§Ù…Ù„ Ø¢Ù…ÙˆØ²Ø´"></textarea>
        <button type="submit">Ø§ÙØ²ÙˆØ¯Ù† Ø¢Ù…ÙˆØ²Ø´</button>
    </form>
</body>
</html>
<h2>Ù…Ø¯ÛŒØ±ÛŒØª Ø¢Ù…ÙˆØ²Ø´â€ŒÙ‡Ø§</h2>
<div id="admin-lessons-list"></div>
<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'

  const supabaseUrl = 'https://tqrxizzfxxbtbntohmcz.supabase.co';
  const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRxcnhpenpmeHhidGJudG9obWN6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM2MTgzNDIsImV4cCI6MjA2OTE5NDM0Mn0.CDyWAkSYR8wB_ZyimtN_glB4bZkt9aWY6PxO_1CC4S8';

  const supabase = createClient(supabaseUrl, supabaseKey);

  async function loadLessons() {
    const { data, error } = await supabase
      .from('lessons')
      .select('*')
      .order('created_at', { ascending: false });

    const list = document.getElementById('admin-lessons-list');
    list.innerHTML = '';

    if (error) {
      list.innerHTML = 'âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¢Ù…ÙˆØ²Ø´â€ŒÙ‡Ø§';
      return;
    }

    data.forEach(lesson => {
      const item = document.createElement('div');
      item.innerHTML = `
        <h3>${lesson.title}</h3>
        <p>${lesson.content}</p>
        <button onclick="deleteLesson('${lesson.id}')">ğŸ—‘ Ø­Ø°Ù</button>
        <hr>
      `;
      list.appendChild(item);
    });
  }

  window.deleteLesson = async function(id) {
    if (!confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù†ÛŒØŸ')) return;

    const { error } = await supabase
      .from('lessons')
      .delete()
      .eq('id', id);

    if (error) {
      alert('Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù Ø¢Ù…ÙˆØ²Ø´');
      return;
    }

    alert('âœ… Ø­Ø°Ù Ø´Ø¯');
    loadLessons();
  }

  loadLessons();
</script>
<script type="module">
  import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

  const supabase = createClient("https://tqrxizzfxxbtbntohmcz.supabase.co", "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRxcnhpenpmeHhidGJudG9obWN6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM2MTgzNDIsImV4cCI6MjA2OTE5NDM0Mn0.CDyWAkSYR8wB_ZyimtN_glB4bZkt9aWY6PxO_1CC4S8");

  const { data: { user } } = await supabase.auth.getUser();

  if (!user || user.email !== "mehrsammanavi1221@gmail.com") {
    alert("Ø´Ù…Ø§ Ø§Ø¬Ø§Ø²Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯.");
    window.location.href = "/";
  }
</script>
<script type="module">
  import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

  const supabase = createClient(
    "https://tqrxizzfxxbtbntohmcz.supabase.co",
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRxcnhpenpmeHhidGJudG9obWN6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM2MTgzNDIsImV4cCI6MjA2OTE5NDM0Mn0.CDyWAkSYR8wB_ZyimtN_glB4bZkt9aWY6PxO_1CC4S8"
  );

  const { data: { user } } = await supabase.auth.getUser();

  if (!user || user.email !== "mehrsammanavi1221@gmail.com") {
    alert("Ø´Ù…Ø§ Ø§Ø¬Ø§Ø²Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯!");
    window.location.href = "/index.html";
  }
</script>
<h2>Ø§ÙØ²ÙˆØ¯Ù† Ø¢Ù…ÙˆØ²Ø´ Ø¬Ø¯ÛŒØ¯</h2>
<form id="lesson-form">
  <input type="text" id="title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø¢Ù…ÙˆØ²Ø´" required>
  <textarea id="content" placeholder="Ù…Ø­ØªÙˆØ§ÛŒ Ø¢Ù…ÙˆØ²Ø´" required></textarea>
  <button type="submit">Ø°Ø®ÛŒØ±Ù‡ Ø¢Ù…ÙˆØ²Ø´</button>
</form>

<hr>

<h2>Ø¢Ù…ÙˆØ²Ø´â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯</h2>
<ul id="lessons-list"></ul>
<script type="module">
  import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

  const supabase = createClient(
    "https://tqrxizzfxxbtbntohmcz.supabase.co",
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRxcnhpenpmeHhidGJudG9obWN6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM2MTgzNDIsImV4cCI6MjA2OTE5NDM0Mn0.CDyWAkSYR8wB_ZyimtN_glB4bZkt9aWY6PxO_1CC4S8"
  );

  // ÙÙ‚Ø· Ø§Ú¯Ø± Ù…Ø¯ÛŒØ± Ù‡Ø³ØªÛŒ Ø§Ø¬Ø§Ø²Ù‡ Ø¨Ø¯Ù‡
  const { data: { user } } = await supabase.auth.getUser();
  if (!user || user.email !== "mehrsammanavi1221@gmail.com") {
    alert("Ø´Ù…Ø§ Ø§Ø¬Ø§Ø²Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯");
    window.location.href = "/index.html";
  }

  const form = document.getElementById("lesson-form");
  const list = document.getElementById("lessons-list");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const title = document.getElementById("title").value;
    const content = document.getElementById("content").value;

    const { error } = await supabase.from("lessons").insert([
      { title, content }
    ]);

    if (error) {
      alert("Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ø¢Ù…ÙˆØ²Ø´");
      console.error(error);
    } else {
      alert("Ø¢Ù…ÙˆØ²Ø´ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯");
      form.reset();
      loadLessons();
    }
  });

  async function loadLessons() {
    const { data, error } = await supabase.from("lessons").select("*").order("id", { ascending: false });

    list.innerHTML = "";
    if (error) return console.error(error);

    data.forEach(lesson => {
      const li = document.createElement("li");
      li.innerHTML = `
        <strong>${lesson.title}</strong>
        <p>${lesson.content}</p>
        <button onclick="deleteLesson(${lesson.id})">âŒ Ø­Ø°Ù</button>
      `;
      list.appendChild(li);
    });
  }

  window.deleteLesson = async (id) => {
    const { error } = await supabase.from("lessons").delete().eq("id", id);
    if (error) {
      alert("Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù");
    } else {
      loadLessons();
    }
  };

  // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
  loadLessons();
</script>
<h2>Ø§ÙØ²ÙˆØ¯Ù† Ø¢Ù…ÙˆØ²Ø´ Ø¬Ø¯ÛŒØ¯</h2>
<form id="lesson-form">
  <input type="text" id="title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø¢Ù…ÙˆØ²Ø´" required>
  <textarea id="content" placeholder="Ù…Ø­ØªÙˆØ§ÛŒ Ø¢Ù…ÙˆØ²Ø´" required></textarea>
  <button type="submit">Ø°Ø®ÛŒØ±Ù‡ Ø¢Ù…ÙˆØ²Ø´</button>
</form>

<hr>

<h2>Ø¢Ù…ÙˆØ²Ø´â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯</h2>
<ul id="lessons-list"></ul>
<script type="module">
  import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

  const supabase = createClient(
    "https://tqrxizzfxxbtbntohmcz.supabase.co",
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRxcnhpenpmeHhidGJudG9obWN6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM2MTgzNDIsImV4cCI6MjA2OTE5NDM0Mn0.CDyWAkSYR8wB_ZyimtN_glB4bZkt9aWY6PxO_1CC4S8"
  );

  const form = document.getElementById("lesson-form");
  const list = document.getElementById("lessons-list");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const title = document.getElementById("title").value.trim();
    const content = document.getElementById("content").value.trim();

    if (!title || !content) return alert("Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯");

    const { error } = await supabase.from("lessons").insert([{ title, content }]);

    if (error) {
      alert("Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ø¢Ù…ÙˆØ²Ø´");
      console.error(error);
    } else {
      alert("Ø¢Ù…ÙˆØ²Ø´ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯");
      form.reset();
      loadLessons();
    }
  });

  async function loadLessons() {
    const { data, error } = await supabase.from("lessons").select("*").order("id", { ascending: false });
    if (error) return console.error(error);

    list.innerHTML = "";
    data.forEach(lesson => {
      const li = document.createElement("li");
      li.innerHTML = `
        <strong>${lesson.title}</strong><br>
        <span>${lesson.content}</span><br>
        <button onclick="deleteLesson(${lesson.id})">ğŸ—‘ Ø­Ø°Ù</button>
        <hr>
      `;
      list.appendChild(li);
    });
  }

  window.deleteLesson = async (id) => {
    const { error } = await supabase.from("lessons").delete().eq("id", id);
    if (error) {
      alert("Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù Ø¢Ù…ÙˆØ²Ø´");
      console.error(error);
    } else {
      loadLessons();
    }
  };

  loadLessons();
</script>
